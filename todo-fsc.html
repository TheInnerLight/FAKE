<!DOCTYPE HTML>

<html>
	<head>
		<title>Compiling F# Sources
</title>
		<meta charset="utf-8" />
		<meta name="author" content="Steffen Forkmann, Mauricio Scheffer, Colin Bull, Matthias Dittrich" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link type="text/css" rel="stylesheet" href="assets/css/style.css">
		<!--<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">-->
		<link rel="stylesheet" href="assets/css/iconmonstr-iconic-font.css" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body class="no-sidebar">
		<div id="page-wrapper">


			<!-- Header Wrapper -->
				<div id="header-wrapper">
					<div class="container">
						<!-- Header -->
							<header id="header">
								<div class="inner">

									<!-- Logo -->
										<h1><a href="index.html" id="logo">FAKE 5</a></h1>

									<!-- Nav -->
										<nav id="nav">
											<ul>
												<li ><a href="index.html">Home</a></li>
												<li >
													<a href="fake-what-is-fake.html">Tutorials</a>
													<ul>
														<li><a href="fake-gettingstarted.html">Getting Started Tutorial</a></li>
														<li><a href="fake-cache.html">Build script caching</a></li>
														<li><a href="fake-commandline.html">Running FAKE from command line</a></li>
														<li><a href="fake-dotnetcore.html">FAKE 5 quickstart</a></li>
														<li><a href="fake-migrate-to-fake-5.html">FAKE 5 migration</a></li>
													</ul>
												</li>
												<li >
													<a href="fake-what-is-fake.html">Project</a>
													<ul>
														<li><a href="help-users.html">Who is using FAKE?</a></li>
														<li><a href="https://www.nuget.org/packages/FAKE">NuGet</a></li>
														<li><a href="https://chocolatey.org/packages/fake">Chocolatey</a></li>
														<li><a href="https://github.com/fsharp/FAKE"><i style="font-size: 15px;" class="im im-github"></i> GitHub</a></li>
														<li><a href="https://github.com/fsharp/FAKE/blob/master/License.txt">License</a></li>
														<li><a href="RELEASE_NOTES.html">Release Notes</a></li>
														<li><a href="contributing.html">Contributing</a></li>
														<li><a href="https://github.com/fsharp/FAKE/issues/new"><i style="font-size: 15px;" class="im im-mail"></i> Ask a question or report a bug</a></li>
													</ul>
												</li>
												<li class="current_page_item">
													<a href="fake-fake5-modules.html">Modules</a>
													<ul>
														<li>
															<a href="404.html">Core</a>
															<ul>
																<li><a href="404.html">Targets</a></li>
																<li><a href="404.html">Globbing</a></li>
																<li><a href="404.html">Environment</a></li>
																<li><a href="404.html">Process</a></li>
																<li><a href="404.html">String</a></li>
																<li><a href="404.html">BuildServer</a></li>
																<li><a href="404.html">Tracing</a></li>
																<li><a href="404.html">Context</a></li>
																<li><a href="404.html">Xml</a></li>
																<li><a href="404.html">Tasks</a></li>
															</ul>
														</li>
														<li>
															<a href="404.html">IO</a>
															<ul>
																<li><a href="404.html">FileSystem</a></li>
																<li><a href="404.html">Zip</a></li>
															</ul>
														</li>
														<li>
															<a href="404.html">DotNet</a>
															<ul>
																<li><a href="404.html">Cli</a></li>
																<li><a href="dotnet-assemblyinfo.html">AssemblyInfoFile</a></li>
																<li><a href="404.html">MsBuild</a></li>
																<li><a href="404.html">Testing - NUnit</a></li>
																<li><a href="404.html">Testing - MSpec</a></li>
																<li><a href="404.html">Testing - XUnit2</a></li>
																<li><a href="dotnet-nuget.html">NuGet</a></li>
																<li><a href="404.html">Paket</a></li>
															</ul>
														</li>
														<li>
															<a href="404.html">Tools</a>
															<ul>
																<li><a href="404.html">Git</a></li>
															</ul>
														</li>
														<li>
															<a href="404.html">Windows</a>
															<ul>
																<li><a href="windows-chocolatey.html">Chocolatey</a></li>
															</ul>
														</li>
														<li>
															<a href="404.html">Legacy / Not Migrated</a>
															<ul>
																<li><a href="todo-fxcop.html">DotNet.FxCop</a></li>
																<li><a href="todo-fsc.html">DotNet.Fsc</a></li>
																<li><a href="todo-teamcity.html">BuildServer.TeamCity</a></li>
																<li><a href="todo-teamcityadvanced.html">BuildServer.TeamCity.Advanced</a></li>
																<li><a href="todo-canopy.html">DotNet.Testing.Canopy</a></li>
																<li><a href="todo-octopusdeploy.html">?.?.OctopusDeploy</a></li>
																<li><a href="todo-typescript.html">JavaScript?.TypeScript</a></li>
																<li><a href="todo-azurewebjobs.html">Cloud.Azure.WebJobs</a></li>
																<li><a href="todo-azurecloudservices.html">Cloud.Azure.CloudService</a></li>
																<li><a href="todo-fluentmigrator.html">?.?.FluentMigrator</a></li>
																<li><a href="todo-androidpublisher.html">?.?.AndroidPublisher</a></li>
																<li><a href="todo-watch.html">IO.FileWatcher</a></li>
																<li><a href="todo-wix.html">Windows.WiX</a></li>
																<li><a href="todo-slacknotification.html">API.Slack</a></li>
																<li><a href="todo-msteamsnotification.html">API.MsTeams</a></li>
																<li><a href="todo-sonarcube.html">Testing.SonarQube</a></li>
																<li><a href="todo-stylecop.html">DotNet.StyleCop</a></li>
																<li><a href="todo-deploy.html">Fake.Deploy</a></li>
																<li><a href="todo-iis.html">?.?.IIS</a></li>
																<li><a href="todo-dacpac.html">?.?.DacPac</a></li>
																<li><a href="todo-vagrant.html">?.?.Vagrant</a></li>
															</ul>
														</li>
													</ul>
												</li>
												<li ><a href="apidocs/index.html">API Reference</a></li>
											</ul>
										</nav>

								</div>
							</header>

						<!-- Banner -->
							

					</div>
				</div>

			<!-- Main Wrapper -->
				<div id="main-wrapper">
          			

					<div class="wrapper style2">
						<div class="inner">
							<div class="container">
								<div id="content">

									<!-- Content -->
                      <article>
<h1>Compiling F# Sources</h1>
<p><strong>Note:  This documentation is for FAKE.exe before version 5 (or the non-netcore version). The documentation needs te be updated, please help! </strong></p>
<p>The <a href="apidocs/fake-fschelper.html">Fsc task set</a> in FAKE can be used to build F# source files and output libraries, modules,
and executables by using the bundled
<a href="https://github.com/fsharp/FSharp.Compiler.Service">FSharp.Compiler.Service</a>.
In this tutorial we will look at these compile tasks.</p>
<h2>The Fsc task</h2>
<p>The <code>Fsc</code> task can be used in standard FAKE targets:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;/path/to/FakeLib.dll&quot;</span>
<span class="k">open</span> <span class="id">Fake</span>

<span class="id">Target</span> <span class="s">&quot;Otherthing.dll&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
    <span class="pn">[</span><span class="s">&quot;Otherthing.fs&quot;</span><span class="pn">;</span> <span class="s">&quot;Otherthing2.fs&quot;</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="id">FscHelper</span><span class="pn">.</span><span class="id">compile</span> <span class="pn">[</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">Target</span> <span class="id">FscHelper</span><span class="pn">.</span><span class="id">TargetType</span><span class="pn">.</span><span class="id">Library</span>
    <span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="k">function</span> <span class="n">0</span> <span class="k">-&gt;</span> <span class="pn">(</span><span class="pn">)</span> <span class="pn">|</span> <span class="id">c</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">failwithf</span> <span class="s">&quot;F# compiler return code: %i&quot;</span> <span class="id">c</span>
<span class="pn">)</span>

<span class="id">Target</span> <span class="s">&quot;Main.exe&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
    <span class="pn">[</span><span class="s">&quot;Main.fs&quot;</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="id">FscHelper</span><span class="pn">.</span><span class="id">compile</span> <span class="pn">[</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">References</span> <span class="pn">[</span><span class="s">&quot;Something.dll&quot;</span><span class="pn">;</span> <span class="s">&quot;Otherthing.dll&quot;</span><span class="pn">]</span>
    <span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="k">function</span> <span class="n">0</span> <span class="k">-&gt;</span> <span class="pn">(</span><span class="pn">)</span> <span class="pn">|</span> <span class="id">c</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="id">failwithf</span> <span class="s">&quot;F# compiler return code: %i&quot;</span> <span class="id">c</span>
<span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>The <code>FscHelper.compile</code> task takes two arguments:</p>
<ol>
<li>a list of compile parameters (<code>FscParam</code>), and</li>
<li>a list of source files.</li>
</ol>
<p>We start with the list of source files, and send it into the <code>FscHelper.compile</code> task using F#'s
<code>|&gt;</code> operator. The list of parameters included in the first argument will override the
default parameters.</p>
<p>In the above examples, notice that we don't always override the output
file name. By default <code>FscHelper.compile</code> will behave exactly the same way as
<code>fsc.exe</code>. If you don't specify an output file: it will use the name of
the first input file, and the appropriate filename extension.</p>
<p><code>FscParam.Target</code> also behaves in the same way as the <code>fsc.exe</code>
<code>--target:</code> switch: if you don't override it, it defaults to an
executable output type.</p>
<p>You can override all <code>fsc.exe</code> default compile parameters by explicitly passing the values
you want to use. All F# compiler parameters are available as <code>FscParam</code> union cases:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">Target</span> <span class="s">&quot;Something.dll&quot;</span> <span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span class="k">-&gt;</span>
    <span class="pn">[</span><span class="s">&quot;Something.fs&quot;</span><span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="id">FscHelper</span><span class="pn">.</span><span class="id">compile</span> <span class="pn">[</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">Out</span> <span class="s">&quot;Something.dll&quot;</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">Target</span> <span class="id">FscHelper</span><span class="pn">.</span><span class="id">TargetType</span><span class="pn">.</span><span class="id">Library</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">NoOptimizationData</span>
        <span class="id">FscHelper</span><span class="pn">.</span><span class="id">Checked</span> <span class="k">true</span>
    <span class="pn">]</span>
    <span class="o">|&gt;</span> <span class="k">function</span> <span class="n">0</span> <span class="k">-&gt;</span> <span class="pn">(</span><span class="pn">)</span> <span class="pn">|</span> <span class="id">c</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 3)" onmouseover="showTip(event, 'fs1', 3)" class="id">failwithf</span> <span class="s">&quot;F# compiler return code: %i&quot;</span> <span class="id">c</span>
<span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>See the <a href="apidocs/fake-fschelper.html">API docs for FscHelper</a> for details of
the available parameters.</p>
<p>The <code>FscHelper.compile</code> task will print any compile warnings or errors. If there's any
compile error, it won't raise any error to interrupt the build process,
instead, it returns the exit status of the compile process.</p>
<p>Having an exit status code returned can be useful when you're trying to
integrate FAKE with other build management tools, e.g. your own CI
server or a test runner.</p>
<h2>FscHelper.compileFiles</h2>
<p>This task is lower level than the previous one. It takes a list of
source files and a list of strings which contains the same arguments
you'd pass in to the <code>fsc.exe</code> command-line tool. It too prints warnings
and errors, and returns a compile exit status code. E.g.:</p>
<p>Target "Something.dll" (fun _ -&gt;
["Something.fs"]
|&gt; FscHelper.compileFiles ["-o"; "Something.dll"; "--target:library"]
|&gt; ignore
)</p>
<p>This task may be useful when you already have compile options in string
format and just need to pass them in to your build tool. You'd just need
to split the string on whitespace, and pass the resulting list into
<code>FscHelper.compileFiles</code>.</p>

<div class="tip" id="fs1">val failwithf : format:Printf.StringFormat&lt;&#39;T,&#39;Result&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.failwithf</div>

                      </article>
								</div>
							</div>
						</div>
					</div>

				</div>

			<!-- Footer Wrapper -->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Important Links</h2>
										<ul class="divided">
											<li><a href="404.html">Quickstart</a></li>
											<li><a href="404.html">Installation</a></li>
											<li><a href="404.html">Modules</a></li>
											<li><a href="404.html">FAKE Header</a></li>
											<li><a href="404.html">Git</a></li>
										</ul>
									</section>

							</div>
							<div class="3u 12u(mobile)">

								<!-- Links -->
									<section>
										<h2>Further projects</h2>
										<ul class="divided">
											<li><a href="404.html">Paket</a></li>
											<li><a href="404.html">FSharp Formatting</a></li>
											<li><a href="404.html">F#</a></li>
											<li><a href="404.html">Ionide</a></li>
											<li><a href="404.html">Forge</a></li>
											<li><a href="404.html">FSharp.Compiler.Service</a></li>
										</ul>
									</section>

								<!-- Links -->
									<section>
										<h2>Learn F#</h2>
										<ul class="divided">
											<li><a href="404.html">Tutorial 1</a></li>
											<li><a href="404.html">Tutorial 2</a></li>
											<li><a href="404.html">Tutorial 3</a></li>
											<li><a href="404.html">Tutorial 4</a></li>
										</ul>
									</section>

							</div>
							<div class="6u 12u(mobile)">

								<!-- About -->
									<section>
										<h2><strong>FAKE 5</strong> is a community effort.</h2>
										<p>Please help with the development of <strong>FAKE 5</strong>, a free, fully open source
										DSL and Runtime for running F# scripts. Look at the open issues at <a href="https://github.com/fsharp/FAKE/issues">Github</a>,
                                        discuss new features, fix bugs and send pull requests!</p>
										<a href="contributing.html" class="button alt icon fa-arrow-circle-right">Learn More</a>
									</section>

								<!-- Contact -->
									<section>
										<h2>Get in touch</h2>
										<div>
											<div class="row">
												<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Twitter</dt>
														<dd><a href="https://twitter.com/fsharpMake">@fsharpMake</a></dd>
														<dt>WWW</dt>
														<dd><a href="https://fake.build">fake.build</a></dd>
														<dt>Github</dt>
														<dd><a href="https://github.com/fsharp/FAKE/issues/new">Github</a></dd>
														<dt>F# Slack</dt>
														<dd><a href="https://fsharp.slack.com/">Slack</a></dd>
													</dl>
												</div>
												<!--<div class="6u 12u(mobile)">
													<dl class="contact">
														<dt>Address</dt>
														<dd>
															1234 Fictional Rd<br />
															Nashville, TN 00000-0000<br />
															USA
														</dd>
														<dt>Phone</dt>
														<dd>(000) 000-0000</dd>
													</dl>
												</div>-->
											</div>
										</div>
									</section>

							</div>
						</div>
						<div class="row">
							<div class="12u">
								<div id="copyright">
									<ul class="menu">
										<li>&copy; FAKE. All rights reserved</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
									</ul>
								</div>
							</div>
						</div>
					</footer>
				</div>

		</div>

		<!-- Scripts -->
			<!--<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>-->
			<script src="assets/js/tips.js" type="text/javascript"></script>
			<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>